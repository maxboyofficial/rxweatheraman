<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RX Weather</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* --- CSS VARIABLES --- */
        :root {
            --card-bg: rgba(20, 30, 45, 0.75); 
            --card-border: rgba(255, 255, 255, 0.2);
            --text-color: #ffffff;
            --accent-color: #F05514; 
            --divider-color: rgba(255, 255, 255, 0.2);
            --shadow: 0 40px 80px rgba(0, 0, 0, 0.6);
            --ios-blur: blur(25px);
            --ios-bg: rgba(30, 30, 30, 0.90);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }

        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow: hidden;
            position: relative;
            background-color: #ff9966;
            transition: 0.3s;
        }

        /* --- BEAUTIFUL SKY BACKGROUND (Pink/Orange Twilight) --- */
        .sky-background {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(135deg, #2b1055, #7597de, #FF4B2B, #F09819);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            z-index: -20;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* --- STARS ANIMATION (Subtle Twinkle) --- */
        .stars {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-image: 
                radial-gradient(2px 2px at 20px 30px, #eee, rgba(0,0,0,0)),
                radial-gradient(2px 2px at 40px 70px, #fff, rgba(0,0,0,0)),
                radial-gradient(2px 2px at 50px 160px, #ddd, rgba(0,0,0,0)),
                radial-gradient(2px 2px at 90px 40px, #fff, rgba(0,0,0,0)),
                radial-gradient(2px 2px at 130px 80px, #fff, rgba(0,0,0,0));
            background-repeat: repeat;
            background-size: 200px 200px;
            opacity: 0;
            z-index: -15;
            animation: twinkle 5s infinite alternate;
        }
        @keyframes twinkle { 
            0% { opacity: 0.2; transform: scale(0.8); } 
            100% { opacity: 0.6; transform: scale(1.1); } 
        }

        /* --- REALISTIC CLOUDS (Smoother Loop) --- */
        .clouds-layer {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: url('https://freepngimg.com/thumb/cloud/7-cloud-png-image.png');
            background-repeat: repeat-x;
            z-index: -10;
            opacity: 0.5;
        }

        .c1 { background-size: 1000px; top: 5%; animation: moveClouds 60s linear infinite; }
        .c2 { background-size: 800px; top: 20%; animation: moveClouds 90s linear infinite reverse; opacity: 0.3; }

        @keyframes moveClouds { 
            from { background-position: 0 0; } 
            to { background-position: 1000px 0; } 
        }

        /* --- MENUS --- */
        .menu-btn {
            position: fixed; top: 20px; left: 20px; z-index: 200;
            background: rgba(255, 255, 255, 0.2); backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3); color: #fff;
            width: 45px; height: 45px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; transition: 0.3s; box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        .menu-btn:hover { background: var(--accent-color); transform: rotate(90deg); }

        .dropdown-menu {
            position: fixed; top: 80px; left: 20px;
            background: rgba(15, 20, 30, 0.9); backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 12px;
            width: 220px; z-index: 199; transform: scale(0); transform-origin: top left;
            transition: 0.4s cubic-bezier(0.34, 1.56, 0.64, 1); /* Bouncy Open */
            overflow: hidden; box-shadow: 0 15px 35px rgba(0,0,0,0.4);
        }
        .dropdown-menu.open { transform: scale(1); }

        .menu-item {
            padding: 18px 25px; color: #fff; cursor: pointer; transition: 0.3s; font-size: 15px; font-weight: 500;
            border-bottom: 1px solid rgba(255,255,255,0.05); display: flex; align-items: center; gap: 12px;
        }
        .menu-item:last-child { border-bottom: none; }
        .menu-item:hover { background: linear-gradient(90deg, rgba(240, 85, 20, 0.15), transparent); color: var(--accent-color); padding-left: 30px; }

        .view-switcher {
            position: fixed; top: 20px; right: 20px;
            background: rgba(255, 255, 255, 0.2); backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3); color: #fff;
            padding: 10px 15px; border-radius: 30px; cursor: pointer; z-index: 100;
            font-size: 12px; font-weight: bold; display: flex; align-items: center; gap: 8px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2); transition: 0.3s;
        }
        .view-switcher:hover { background: var(--accent-color); transform: scale(1.05); }

        .online-counter {
            position: fixed; top: 20px; right: 125px;
            background: rgba(255, 255, 255, 0.15); backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2); color: #fff;
            padding: 10px 15px; border-radius: 30px; z-index: 100;
            font-size: 12px; font-weight: 600; display: flex; align-items: center; gap: 8px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1); transition: 0.3s;
        }
        .online-dot {
            width: 8px; height: 8px; background-color: #4cd137; border-radius: 50%;
            box-shadow: 0 0 8px #4cd137; animation: blink 2s infinite;
        }
        @keyframes blink { 0% {opacity: 1;} 50% {opacity: 0.4;} 100% {opacity: 1;} }

        .insta-sticker {
            position: fixed; bottom: 30px; right: 30px;
            width: 60px; height: 60px; background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%; display: flex; justify-content: center; align-items: center;
            text-decoration: none; z-index: 100; box-shadow: 0 10px 25px rgba(0,0,0,0.3);
            transition: all 0.3s;
        }
        .insta-sticker i {
            font-size: 32px;
            background: -webkit-linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }
        .insta-sticker:hover { transform: scale(1.15) rotate(5deg); background: rgba(255, 255, 255, 0.25); }

        /* --- MODALS --- */
        .contact-slider {
            position: fixed; top: 0; left: -100%; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.6); backdrop-filter: blur(5px); z-index: 250;
            display: flex; justify-content: flex-start; transition: 0.5s cubic-bezier(0.19, 1, 0.22, 1);
        }
        .contact-slider.active { left: 0; }
        .contact-content {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            width: 320px; height: 100%; padding: 40px;
            display: flex; flex-direction: column; justify-content: center;
            border-right: 1px solid rgba(255,255,255,0.3); position: relative;
            box-shadow: 15px 0 40px rgba(0,0,0,0.4); color: #fff;
        }
        .close-contact {
            position: absolute; top: 20px; right: 20px; background: transparent;
            border: none; color: #fff; font-size: 24px; cursor: pointer; transition: 0.3s;
        }
        .close-contact:hover { transform: scale(1.2) rotate(90deg); }
        .email-box {
            background: rgba(255,255,255,0.2); padding: 20px; border-radius: 15px; margin-top: 30px;
            word-break: break-all; text-align: center; border: 1px solid rgba(255,255,255,0.4);
            font-family: monospace; font-size: 15px; font-weight: bold;
        }
        .copy-btn {
            margin-top: 20px; background: #fff; color: #764ba2; border: none;
            padding: 15px; width: 100%; border-radius: 12px; cursor: pointer; font-weight: 800; 
            transition: 0.3s; display: flex; align-items: center; justify-content: center; gap: 8px;
        }
        .copy-btn:hover { transform: translateY(-3px); box-shadow: 0 10px 25px rgba(0,0,0,0.3); }

        .rate-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.75); backdrop-filter: blur(15px); z-index: 300;
            display: flex; align-items: center; justify-content: center;
            opacity: 0; pointer-events: none; transition: 0.4s ease;
        }
        .rate-overlay.active { opacity: 1; pointer-events: all; }

        .rate-card {
            background: var(--ios-bg); border: 1px solid rgba(255,255,255,0.15);
            width: 90%; max-width: 450px; height: 85vh; 
            border-radius: 28px; display: flex; flex-direction: column;
            transform: scale(0.8); opacity: 0; 
            /* Smoother Elastic Opening */
            transition: 0.5s cubic-bezier(0.34, 1.56, 0.64, 1); 
            box-shadow: 0 20px 60px rgba(0,0,0,0.6); overflow: hidden;
        }
        .rate-overlay.active .rate-card { transform: scale(1); opacity: 1; }

        .rate-header { padding: 25px; border-bottom: 1px solid rgba(255,255,255,0.1); display: flex; justify-content: space-between; align-items: center; }
        .rate-title { font-size: 20px; font-weight: 700; color: #fff; margin: 0; }
        .rate-body { padding: 25px; overflow-y: auto; flex: 1; }
        
        .glass-input, .glass-textarea {
            width: 100%; padding: 14px; background: #1C1C1E; border: none; 
            border-radius: 12px; color: #fff; outline: none; font-size: 15px; transition: 0.3s;
            margin-bottom: 15px;
        }
        .glass-textarea { height: 80px; resize: none; font-family: inherit; }
        .glass-input:focus, .glass-textarea:focus { background: #2C2C2E; box-shadow: 0 0 0 2px var(--accent-color); }

        .emoji-bar { display: flex; gap: 10px; margin-bottom: 15px; overflow-x: auto; padding-bottom: 5px; }
        .emoji-btn {
            background: rgba(255,255,255,0.1); border: none; border-radius: 50%; width: 35px; height: 35px;
            font-size: 18px; cursor: pointer; transition: 0.2s; flex-shrink: 0;
        }
        .emoji-btn:hover { background: rgba(255,255,255,0.3); transform: scale(1.2); }

        .stars-container { font-size: 32px; color: #3A3A3C; cursor: pointer; text-align: center; margin-bottom: 20px; }
        .stars-container i { transition: 0.2s; margin: 0 4px; }
        .stars-container i.active, .stars-container i:hover { color: #FFD60A; text-shadow: 0 0 15px rgba(255, 214, 10, 0.4); transform: scale(1.1); }

        .submit-btn {
            background: #007AFF; color: #fff; border: none; padding: 14px; width: 100%;
            border-radius: 14px; cursor: pointer; font-weight: 700; font-size: 16px; transition: 0.3s;
        }
        .submit-btn:hover { background: #0062cc; }

        .reviews-section-title { font-size: 14px; font-weight: 700; color: #8E8E93; margin: 25px 0 15px 0; text-transform: uppercase; letter-spacing: 1px; }
        .reviews-list { display: flex; flex-direction: column; gap: 15px; }
        
        .review-item {
            background: rgba(255,255,255,0.05); padding: 15px; border-radius: 16px;
            border: 1px solid rgba(255,255,255,0.05);
            /* Slide In Animation for New Items */
            animation: slideInReview 0.5s ease-out backwards;
        }
        
        @keyframes slideInReview {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .r-header { display: flex; justify-content: space-between; margin-bottom: 8px; }
        .r-name { font-weight: 700; color: #fff; font-size: 14px; }
        .r-stars { color: #FFD60A; font-size: 12px; }
        .r-text { font-size: 14px; color: rgba(255,255,255,0.8); line-height: 1.4; }
        .r-time { font-size: 11px; color: #8E8E93; margin-top: 8px; display: block; text-align: right; }
        .no-reviews { text-align: center; color: rgba(255,255,255,0.5); font-style: italic; font-size: 14px; margin-top: 20px; }

        .rate-success {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(30,30,30,0.95); display: none; flex-direction: column;
            align-items: center; justify-content: center; z-index: 50;
        }
        .success-icon { font-size: 50px; color: #32D74B; margin-bottom: 15px; animation: bounce 0.5s; }
        @keyframes bounce { 0%, 100% {transform: scale(1);} 50% {transform: scale(1.2);} }

        /* --- MAIN CARD (Floating Animation Fix) --- */
        .card {
            background: var(--card-bg); backdrop-filter: blur(25px); -webkit-backdrop-filter: blur(25px);
            border: 1px solid var(--card-border); width: 95%; max-width: 700px;
            border-radius: 24px; box-shadow: var(--shadow); display: flex; flex-direction: column;
            overflow: hidden; color: #fff; z-index: 10;
            position: relative; transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            /* Slower, subtler float */
            animation: floatCard 8s ease-in-out infinite;
        }
        @keyframes floatCard { 
            0% { transform: translateY(0px); } 
            50% { transform: translateY(-6px); } 
            100% { transform: translateY(0px); } 
        }

        .card-header { padding: 20px 30px; border-bottom: 1px solid var(--divider-color); display: flex; justify-content: space-between; align-items: center; background: rgba(0,0,0,0.15); }
        .header-brand { display: flex; align-items: center; gap: 10px; }
        .header-title { font-size: 16px; font-weight: 800; text-transform: uppercase; letter-spacing: 1px; text-shadow: 0 2px 4px rgba(0,0,0,0.3); }
        .header-time-container { text-align: right; display: flex; flex-direction: column; align-items: flex-end; }
        .time-text { font-size: 16px; font-weight: 700; font-variant-numeric: tabular-nums; }
        .date-text { font-size: 11px; opacity: 0.8; font-weight: 500; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 2px; }

        .search-area { padding: 25px 30px 10px 30px; display: flex; justify-content: center; }
        .search-box {
            display: flex; align-items: center; background: rgba(255, 255, 255, 0.1);
            border-radius: 50px; padding: 5px 5px 5px 25px; width: 100%; border: 1px solid rgba(255,255,255,0.2); transition: 0.4s;
        }
        .search-box:focus-within { background: rgba(0, 0, 0, 0.6); transform: scale(1.05); border-color: var(--accent-color); box-shadow: 0 0 25px rgba(240, 85, 20, 0.5); }
        .search-box input { border: none; background: transparent; outline: none; color: #fff; flex: 1; font-size: 16px; height: 40px; }
        .search-box input::placeholder { color: rgba(255,255,255,0.7); }
        .search-btns { display: flex; gap: 8px; }
        
        .icon-btn { 
            background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255,255,255,0.2);
            width: 42px; height: 42px; border-radius: 50%; color: #fff; 
            cursor: pointer; display: flex; align-items: center; justify-content: center; transition: 0.3s; 
        }
        .icon-btn:hover { background: #fff; color: #333; transform: scale(1.1); }
        #searchBtn { background: var(--accent-color); border: none; }
        #searchBtn:hover { transform: rotate(90deg) scale(1.1); color: #fff; }
        #locationBtn:hover { background: #4cd137; color: #fff; }

        .weather-content { display: none; flex-direction: row; padding: 30px 30px 10px 30px; animation: fadeIn 0.8s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .left-panel { flex: 1; display: flex; flex-direction: column; justify-content: center; border-right: 1px solid var(--divider-color); padding-right: 20px; }
        .weather-header { display: flex; align-items: center; }
        .weather-icon { width: 90px; filter: drop-shadow(0 0 10px rgba(255,255,255,0.2)); }
        .temp-wrapper { margin-left: 10px; }
        .temp-big { font-size: 72px; font-weight: 700; line-height: 1; }
        .temp-unit { font-size: 30px; vertical-align: top; }
        .real-feel { font-size: 16px; margin-top: 5px; font-weight: 500; }
        .city-name { font-size: 20px; margin-top: 15px; font-weight: 500; display: flex; align-items: center; }
        .city-name i { margin-right: 8px; color: var(--accent-color); }

        .right-panel { flex: 1.1; padding-left: 30px; display: flex; flex-direction: column; justify-content: center; }
        .detail-row { display: flex; justify-content: space-between; align-items: center; padding: 12px 0; border-bottom: 1px solid var(--divider-color); }
        .detail-row:last-child { border-bottom: none; }
        .label { font-size: 15px; opacity: 0.8; }
        .value { font-size: 17px; font-weight: 700; }

        .error { display: none; background: rgba(255, 80, 80, 0.4); padding: 10px 30px; margin-top: 10px; border-left: 5px solid red; }

        .forecast-buttons { display: none; justify-content: center; gap: 15px; padding: 0 30px 20px 30px; }
        .btn-forecast {
            background: rgba(255,255,255,0.1); border: 1px solid var(--divider-color); color: #fff;
            padding: 10px 20px; border-radius: 20px; cursor: pointer; font-size: 12px; font-weight: 600;
            text-transform: uppercase; flex: 1; transition: 0.3s;
        }
        .btn-forecast:hover { background: var(--accent-color); border-color: var(--accent-color); }

        .credit-footer {
            text-align: center; padding: 20px 10px; border-top: 1px solid rgba(255,255,255,0.1);
            margin-top: 15px; color: rgba(255,255,255,0.7);
        }
        .powered-by { font-size: 11px; margin-bottom: 5px; letter-spacing: 0.5px; }
        .powered-by b { color: var(--accent-color); font-weight: 700; }
        .copyright { font-size: 10px; opacity: 0.7; }

        /* FORECAST MODAL */
        .forecast-modal {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(15, 20, 30, 0.95); backdrop-filter: blur(20px); z-index: 50;
            padding: 30px; display: flex; flex-direction: column; opacity: 0; pointer-events: none; transition: 0.4s;
        }
        .forecast-modal.active { opacity: 1; pointer-events: all; }
        .modal-header { display: flex; justify-content: space-between; margin-bottom: 20px; border-bottom: 1px solid var(--divider-color); }
        .modal-title { font-size: 18px; font-weight: 700; color: var(--accent-color); text-transform: uppercase; }
        .close-btn { background: transparent; border: none; color: #fff; font-size: 24px; cursor: pointer; }
        .forecast-container { display: flex; flex-wrap: wrap; gap: 15px; overflow-y: auto; justify-content: center; align-content: flex-start; height: 100%; }
        
        .forecast-card {
            background: linear-gradient(135deg, rgba(63, 161, 251, 0.2), rgba(0, 246, 255, 0.2));
            border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 20px; padding: 15px;
            width: 135px; text-align: center; transition: 0.3s;
        }
        .forecast-card:hover { transform: translateY(-5px); background: linear-gradient(135deg, rgba(255, 85, 20, 0.3), rgba(255, 0, 128, 0.3)); }
        .f-time { font-size: 13px; font-weight: 700; border-bottom: 1px solid rgba(255,255,255,0.2); width: 100%; margin-bottom: 5px; }
        .f-icon { width: 45px; }
        .f-temp { font-size: 20px; font-weight: 700; }
        .f-desc { font-size: 11px; text-transform: capitalize; height: 25px; opacity: 0.8; }
        .f-details { display: flex; justify-content: space-around; width: 100%; font-size: 10px; background: rgba(0,0,0,0.2); padding: 5px; border-radius: 10px; }
        .f-detail-item { display: flex; flex-direction: column; align-items: center; }

        @media (max-width: 600px) {
            body:not(.force-pc) {
                overflow-y: auto; height: auto; min-height: 100vh; display: block; padding-top: 70px;
            }
            body:not(.force-pc) .card { width: 92%; margin: 0 auto 30px auto; border-radius: 20px; animation: none; }
            body:not(.force-pc) .weather-content { flex-direction: column; text-align: center; padding: 15px; }
            body:not(.force-pc) .left-panel { border-right: none; border-bottom: 1px solid var(--divider-color); padding-bottom: 15px; padding-right: 0; align-items: center; }
            body:not(.force-pc) .right-panel { padding-left: 0; padding-top: 15px; }
            body:not(.force-pc) .weather-header { flex-direction: column; }
            body:not(.force-pc) .temp-wrapper { margin-left: 0; margin-top: 5px; }
            body:not(.force-pc) .temp-big { font-size: 48px; }
            body:not(.force-pc) .weather-icon { width: 65px; }
            body:not(.force-pc) .city-name { font-size: 18px; margin-top: 10px; }
            body:not(.force-pc) .detail-row { padding: 8px 0; }
            body:not(.force-pc) .label, body:not(.force-pc) .value { font-size: 13px; }
            body:not(.force-pc) .search-area { padding: 15px; }
            body:not(.force-pc) .search-box { height: 42px; padding: 3px 5px 3px 15px; }
            body:not(.force-pc) .icon-btn { width: 34px; height: 34px; font-size: 13px; border: none; background: rgba(255,255,255,0.15); }
            body:not(.force-pc) .search-btns { gap: 5px; }
            body:not(.force-pc) .search-box input { font-size: 14px; }
            body:not(.force-pc) .forecast-card { width: 45%; padding: 10px; margin-bottom: 5px; }
            body:not(.force-pc) .f-temp { font-size: 16px; }
            body:not(.force-pc) .f-time { font-size: 11px; }
            body:not(.force-pc) .insta-sticker { width: 50px; height: 50px; bottom: 20px; right: 20px; }
            body:not(.force-pc) .online-counter { right: 10px; top: 60px; }
            body:not(.force-pc) .view-switcher { top: 15px; right: 15px; }
            body:not(.force-pc) .menu-btn { top: 15px; left: 15px; }
        }

        body.force-mobile { overflow-y: auto; height: auto; display: block; padding-top: 70px; }
        body.force-mobile .card { max-width: 340px !important; width: 90% !important; margin: 0 auto 30px auto; animation: none; }
        body.force-mobile .weather-content { flex-direction: column; text-align: center; padding: 15px; }
        body.force-mobile .temp-big { font-size: 48px; }
        body.force-mobile .city-name { font-size: 18px; margin-top: 10px; }
        body.force-mobile .weather-icon { width: 65px; }
        body.force-mobile .left-panel { border-right: none; border-bottom: 1px solid var(--divider-color); padding-bottom: 15px; padding-right: 0; align-items: center; }
        body.force-mobile .right-panel { padding-left: 0; padding-top: 15px; }
        body.force-mobile .weather-header { flex-direction: column; }
        body.force-mobile .temp-wrapper { margin-left: 0; margin-top: 5px; }
        body.force-mobile .detail-row { padding: 8px 0; }
        body.force-mobile .label, body.force-mobile .value { font-size: 13px; }
        body.force-mobile .forecast-card { width: 45%; padding: 10px; }
        body.force-mobile .f-temp { font-size: 16px; }
        body.force-mobile .f-time { font-size: 11px; }
        body.force-mobile .search-area { padding: 15px; }
        body.force-mobile .search-box { height: 42px; padding: 3px 5px 3px 15px; }
        body.force-mobile .icon-btn { width: 34px; height: 34px; font-size: 13px; border: none; background: rgba(255,255,255,0.15); }
        body.force-mobile .search-btns { gap: 5px; }

        body.force-pc { overflow: hidden; height: 100vh; display: flex; }
        body.force-pc .card { max-width: 750px !important; width: 95% !important; animation: floatCard 6s ease-in-out infinite; }
        body.force-pc .weather-content { flex-direction: row; text-align: left; }
        body.force-pc .left-panel { border-right: 1px solid var(--divider-color); border-bottom: none; padding-bottom: 0; padding-right: 20px; align-items: flex-start; }
        body.force-pc .weather-header { flex-direction: row; }
        body.force-pc .right-panel { padding-left: 30px; padding-top: 0; }
        @media (max-width: 760px) { body.force-pc .card { transform: scale(0.65); width: 140% !important; margin: 0; } }

    </style>
</head>
<body>

    <!-- MENUS & SWITCHERS -->
    <div class="menu-btn" onclick="toggleMenu()">
        <i class="fas fa-ellipsis-v"></i>
    </div>

    <div class="dropdown-menu" id="dropdown">
        <div class="menu-item" onclick="openContact()"><i class="fas fa-envelope"></i> Contact Us</div>
        <div class="menu-item" onclick="openRateModal()"><i class="fas fa-star"></i> Rate App</div>
    </div>

    <button class="view-switcher" id="viewToggle" onclick="toggleView()">
        <i class="fas fa-magic"></i> <span id="viewText">Auto</span>
    </button>

    <div class="online-counter">
        <span class="online-dot"></span>
        <span id="userCount">24</span> Online
    </div>

    <!-- BEAUTIFUL SKY BACKGROUND -->
    <div class="sky-background"></div>
    <div class="stars"></div>
    <div class="clouds-layer c1"></div>
    <div class="clouds-layer c2"></div>

    <!-- COLORFUL CONTACT SLIDER -->
    <div class="contact-slider" id="contactSlider">
        <div class="contact-content">
            <button class="close-contact" onclick="closeContact()">&times;</button>
            <h2>Contact Us</h2>
            <p style="opacity:0.9;">Have questions or feedback? We'd love to hear from you.</p>
            <div class="email-box" id="emailText">sdfre3511@gmail.com</div>
            <button class="copy-btn" id="copyBtn" onclick="copyEmail()">
                <i class="fas fa-copy"></i> Copy Email
            </button>
        </div>
        <div style="flex:1;" onclick="closeContact()"></div>
    </div>

    <!-- RATE APP MODAL -->
    <div class="rate-overlay" id="rateOverlay">
        <div class="rate-card">
            <div class="rate-header">
                <h3 class="rate-title" style="margin:0;">Rate & Review</h3>
                <button class="close-btn" onclick="closeRateModal()">&times;</button>
            </div>
            
            <div class="rate-body">
                <!-- SUCCESS MSG -->
                <div class="rate-success" id="rateSuccess">
                    <i class="fas fa-check-circle success-icon"></i>
                    <p>Review Submitted!</p>
                </div>

                <!-- FORM -->
                <input type="text" class="glass-input" id="nicknameInput" placeholder="Enter your nickname">
                
                <div class="stars-container">
                    <i class="fas fa-star" onclick="setRating(1)"></i>
                    <i class="fas fa-star" onclick="setRating(2)"></i>
                    <i class="fas fa-star" onclick="setRating(3)"></i>
                    <i class="fas fa-star" onclick="setRating(4)"></i>
                    <i class="fas fa-star" onclick="setRating(5)"></i>
                </div>

                <div class="emoji-bar">
                    <button class="emoji-btn" onclick="addEmoji('üî•')">üî•</button>
                    <button class="emoji-btn" onclick="addEmoji('‚ù§Ô∏è')">‚ù§Ô∏è</button>
                    <button class="emoji-btn" onclick="addEmoji('üåßÔ∏è')">üåßÔ∏è</button>
                    <button class="emoji-btn" onclick="addEmoji('‚òÄÔ∏è')">‚òÄÔ∏è</button>
                    <button class="emoji-btn" onclick="addEmoji('‚ùÑÔ∏è')">‚ùÑÔ∏è</button>
                    <button class="emoji-btn" onclick="addEmoji('‚ö°')">‚ö°</button>
                    <button class="emoji-btn" onclick="addEmoji('üòé')">üòé</button>
                </div>

                <textarea class="glass-textarea" id="reviewInput" placeholder="Write a review..."></textarea>
                
                <button class="submit-btn" onclick="submitReview()">Post Review</button>

                <!-- REVIEWS LIST -->
                <div class="reviews-section-title">Recent Reviews</div>
                <div class="reviews-list" id="reviewsList">
                    <div class="no-reviews">No reviews yet. Be the first to rate!</div>
                </div>
            </div>
        </div>
    </div>

    <a href="https://www.instagram.com/aman.devv/" target="_blank" class="insta-sticker" title="Follow on Instagram">
        <i class="fab fa-instagram"></i>
    </a>

    <!-- CARD -->
    <div class="card">
        <div class="card-header">
            <div class="header-brand">
                <i class="fas fa-cloud-sun"></i> 
                <span class="header-title">RX Weather</span>
            </div>
            <div class="header-time-container">
                <div id="date-display" class="date-text">--</div>
                <div id="clock" class="time-text">--:--:--</div>
            </div>
        </div>

        <div class="search-area">
            <div class="search-box">
                <input type="text" placeholder="Search..." spellcheck="false" id="searchInput">
                <div class="search-btns">
                    <button id="locationBtn" class="icon-btn" title="Use Live Location">
                        <i class="fas fa-location-arrow"></i>
                    </button>
                    <button id="searchBtn" class="icon-btn"><i class="fas fa-search"></i></button>
                </div>
            </div>
        </div>

        <div class="error"></div>

        <div class="weather-content" id="weather-display">
            <div class="left-panel">
                <div class="weather-header">
                    <img src="" class="weather-icon" alt="icon">
                    <div class="temp-wrapper">
                        <div class="temp-big">--<span class="temp-unit">¬∞C</span></div>
                    </div>
                </div>
                <div class="real-feel">RealFeel¬Æ <span id="feels-like">--</span>¬∞</div>
                <div class="city-name"><i class="fas fa-map-marker-alt"></i> <span id="city">--</span></div>
            </div>

            <div class="right-panel">
                <div class="detail-row">
                    <span class="label">Wind</span>
                    <span class="value" id="wind-speed">-- km/h</span>
                </div>
                <div class="detail-row">
                    <span class="label">Wind Gusts</span>
                    <span class="value" id="wind-gust">-- km/h</span>
                </div>
                <div class="detail-row">
                    <span class="label">Humidity</span>
                    <span class="value" id="humidity">--%</span>
                </div>
                <div class="detail-row">
                    <span class="label">Pressure</span>
                    <span class="value" id="pressure">-- mb</span>
                </div>
            </div>
        </div>

        <div class="forecast-buttons" id="forecast-actions">
            <button class="btn-forecast" onclick="openForecast('hourly')">Hourly Forecast</button>
            <button class="btn-forecast" onclick="openForecast('daily')">Daily Forecast</button>
        </div>

        <div class="forecast-modal" id="modal">
            <div class="modal-header">
                <span class="modal-title" id="modal-title">Hourly Forecast</span>
                <button class="close-btn" onclick="closeModal()">&times;</button>
            </div>
            <div class="forecast-container" id="forecast-grid"></div>
        </div>

        <div class="credit-footer">
            <div class="powered-by">Powered By - <b>RX Entertainment</b></div>
            <div class="copyright">&copy; 2026 RX Weather. All rights reserved.</div>
        </div>
    </div>

    <script>
        const apiKey = "bd9768a3c377f6b1b0546c376b794ab6"; 
        const baseUrl = "https://api.openweathermap.org/data/2.5/";

        const searchBox = document.querySelector("#searchInput");
        const searchBtn = document.querySelector("#searchBtn");
        const locationBtn = document.querySelector("#locationBtn");
        const weatherDiv = document.getElementById("weather-display");
        const forecastBtns = document.getElementById("forecast-actions");
        const errorDiv = document.querySelector(".error");
        
        const modal = document.getElementById("modal");
        const modalTitle = document.getElementById("modal-title");
        const forecastGrid = document.getElementById("forecast-grid");

        let currentForecastData = null;

        /* --- REVIEW SYSTEM (LOCAL STORAGE) --- */
        let currentStars = 0;
        let reviews = JSON.parse(localStorage.getItem('rxWeatherReviews')) || [];
        
        // Add default System review if empty
        if (reviews.length === 0) {
            reviews.push({
                name: "RX Team",
                stars: 5,
                text: "Welcome! Rate us to see your review here.",
                date: "Pinned"
            });
        }

        /* --- TIME --- */
        function updateTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('en-US', {
                hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: true
            });
            const dateString = now.toLocaleDateString('en-US', {
                weekday: 'short', month: 'short', day: 'numeric'
            });
            document.getElementById("clock").innerText = timeString;
            document.getElementById("date-display").innerText = dateString;
        }
        setInterval(updateTime, 1000);
        updateTime();

        /* --- LIVE USERS --- */
        let onlineUsers = Math.floor(Math.random() * 30) + 20; 
        const userCountEl = document.getElementById("userCount");
        userCountEl.innerText = onlineUsers;
        setInterval(() => {
            const change = Math.floor(Math.random() * 5) + 1; 
            onlineUsers += change;
            if(onlineUsers > 80 && Math.random() > 0.7) { onlineUsers -= 15; }
            userCountEl.innerText = onlineUsers;
        }, 60000); 

        /* --- MENU & CONTACT --- */
        function toggleMenu() { document.getElementById("dropdown").classList.toggle("open"); }
        function openContact() { document.getElementById("dropdown").classList.remove("open"); document.getElementById("contactSlider").classList.add("active"); }
        function closeContact() { document.getElementById("contactSlider").classList.remove("active"); }
        function copyEmail() {
            const email = document.getElementById("emailText").innerText;
            navigator.clipboard.writeText(email).then(() => { 
                const btn = document.getElementById("copyBtn");
                const original = btn.innerHTML;
                btn.innerHTML = `<i class="fas fa-check"></i> Copied!`;
                btn.style.color = "#4cd137";
                setTimeout(() => {
                    btn.innerHTML = original;
                    btn.style.color = "#764ba2";
                }, 2000);
            });
        }

        /* --- REVIEW LOGIC --- */
        function openRateModal() {
            document.getElementById("dropdown").classList.remove("open");
            document.getElementById("rateOverlay").classList.add("active");
            renderReviews();
        }
        
        function closeRateModal() {
            document.getElementById("rateOverlay").classList.remove("active");
            setTimeout(() => {
                document.getElementById("rateSuccess").style.display = "none";
            }, 500);
        }

        function setRating(n) {
            currentStars = n;
            const stars = document.querySelectorAll(".stars-container i");
            stars.forEach((s, index) => {
                if(index < n) s.classList.add("active");
                else s.classList.remove("active");
            });
        }

        function addEmoji(emoji) {
            document.getElementById("reviewInput").value += emoji;
        }

        function renderReviews() {
            const container = document.getElementById("reviewsList");
            container.innerHTML = "";
            
            reviews.forEach(r => {
                let starHtml = "";
                for(let i=0; i<5; i++) {
                    if(i < r.stars) starHtml += "<i class='fas fa-star'></i>";
                    else starHtml += "<i class='far fa-star'></i>";
                }

                const div = document.createElement("div");
                div.className = "review-item";
                div.innerHTML = `
                    <div class="r-header">
                        <span class="r-name">${r.name}</span>
                        <span class="r-stars">${starHtml}</span>
                    </div>
                    <div class="r-text">${r.text}</div>
                    <span class="r-time">${r.date}</span>
                `;
                container.appendChild(div);
            });
        }

        function submitReview() {
            const name = document.getElementById("nicknameInput").value;
            const text = document.getElementById("reviewInput").value;

            if(!name || !text || currentStars === 0) {
                alert("Please add a nickname, a rating, and a review.");
                return;
            }

            const newReview = {
                name: name,
                stars: currentStars,
                text: text,
                date: "Just now"
            };

            // Add to top
            reviews.unshift(newReview);
            
            // Limit to last 50 reviews
            if(reviews.length > 50) reviews.pop();

            // Save to Local Storage
            localStorage.setItem('rxWeatherReviews', JSON.stringify(reviews));

            // Reset Form
            document.getElementById("nicknameInput").value = "";
            document.getElementById("reviewInput").value = "";
            setRating(0);

            // Show Success & Re-render
            const successOverlay = document.getElementById("rateSuccess");
            successOverlay.style.display = "flex";
            renderReviews();

            setTimeout(() => {
                successOverlay.style.display = "none";
            }, 2000);
        }

        /* --- VIEW TOGGLE --- */
        let viewMode = 0; 
        const viewBtnText = document.getElementById("viewText");
        const viewIcon = document.querySelector("#viewToggle i");

        function toggleView() {
            viewMode++;
            if(viewMode > 2) viewMode = 0;
            const body = document.body;
            body.classList.remove("force-mobile", "force-pc");

            if(viewMode === 0) {
                viewBtnText.innerText = "Auto"; viewIcon.className = "fas fa-magic";
            } else if(viewMode === 1) {
                body.classList.add("force-mobile"); viewBtnText.innerText = "Mobile"; viewIcon.className = "fas fa-mobile-alt";
            } else if(viewMode === 2) {
                body.classList.add("force-pc"); viewBtnText.innerText = "PC"; viewIcon.className = "fas fa-desktop";
            }
        }

        /* --- WEATHER LOGIC --- */
        locationBtn.addEventListener("click", () => {
            if (navigator.geolocation) {
                locationBtn.querySelector("i").className = "fas fa-spinner fa-spin";
                navigator.geolocation.getCurrentPosition(onSuccess, onError);
            } else {
                alert("Geolocation is not supported by your browser");
            }
        });

        function onSuccess(position) {
            const { latitude, longitude } = position.coords;
            locationBtn.querySelector("i").className = "fas fa-location-arrow"; 
            checkWeatherByCoords(latitude, longitude);
        }

        function onError(error) {
            locationBtn.querySelector("i").className = "fas fa-location-arrow";
            alert("Unable to retrieve location.");
        }

        async function checkWeatherByCoords(lat, lon) {
            try {
                const response = await fetch(`${baseUrl}weather?units=metric&lat=${lat}&lon=${lon}&appid=${apiKey}`);
                if (!response.ok) throw new Error("Weather not found");
                const data = await response.json();
                const fResponse = await fetch(`${baseUrl}forecast?units=metric&lat=${lat}&lon=${lon}&appid=${apiKey}`);
                currentForecastData = await fResponse.json();
                updateUI(data);
                locationBtn.style.background = "#4cd137";
                locationBtn.style.color = "#fff";
                setTimeout(() => { locationBtn.style.background = "rgba(255,255,255,0.1)"; }, 3000);
            } catch (error) { showError("Location weather failed."); }
        }

        async function checkWeather(city) {
            if(!city) return;
            try {
                const response = await fetch(`${baseUrl}weather?units=metric&q=${city}&appid=${apiKey}`);
                if (response.status === 404) { showError("Location not found."); return; }
                const data = await response.json();
                const fResponse = await fetch(`${baseUrl}forecast?units=metric&q=${city}&appid=${apiKey}`);
                currentForecastData = await fResponse.json();
                updateUI(data);
            } catch (error) { showError("Connection failed."); }
        }

        function updateUI(data) {
            document.getElementById("city").innerText = data.name;
            document.querySelector(".temp-big").innerHTML = Math.round(data.main.temp) + `<span class="temp-unit">¬∞C</span>`;
            document.getElementById("feels-like").innerText = Math.round(data.main.feels_like);
            const iconCode = data.weather[0].icon;
            document.querySelector(".weather-icon").src = `https://openweathermap.org/img/wn/${iconCode}@4x.png`;
            document.getElementById("wind-speed").innerText = Math.round(data.wind.speed * 3.6) + " km/h"; 
            let gust = data.wind.gust ? Math.round(data.wind.gust * 3.6) : Math.round(data.wind.speed * 3.6) + 3; 
            document.getElementById("wind-gust").innerText = gust + " km/h";
            document.getElementById("humidity").innerText = data.main.humidity + "%";
            document.getElementById("pressure").innerText = data.main.pressure + " mb";
            weatherDiv.style.display = "flex";
            forecastBtns.style.display = "flex"; 
            errorDiv.style.display = "none";
        }

        function openForecast(type) {
            if(!currentForecastData) return;
            forecastGrid.innerHTML = "";
            modal.classList.add("active");
            const list = currentForecastData.list; 
            if(type === 'hourly') {
                modalTitle.innerText = "Next 24 Hours";
                for(let i=0; i<8; i++) createForecastCard(list[i], false);
            } else {
                modalTitle.innerText = "5-Day Forecast";
                for(let i=0; i<list.length; i+=8) createForecastCard(list[i], true);
            }
        }

        function createForecastCard(item, isDaily) {
            const dateObj = new Date(item.dt * 1000);
            let timeLabel = isDaily 
                ? dateObj.toLocaleDateString('en-US', { weekday: 'short' }) 
                : dateObj.toLocaleTimeString('en-US', { hour: 'numeric', hour12: true });
            const temp = Math.round(item.main.temp);
            const icon = item.weather[0].icon;
            const desc = item.weather[0].description;
            const wind = Math.round(item.wind.speed * 3.6);
            const humid = item.main.humidity;
            const card = document.createElement("div");
            card.classList.add("forecast-card");
            card.innerHTML = `
                <div class="f-time">${timeLabel}</div>
                <img src="https://openweathermap.org/img/wn/${icon}.png" class="f-icon">
                <div class="f-temp">${temp}¬∞</div>
                <div class="f-desc">${desc}</div>
                <div class="f-details">
                    <div class="f-detail-item"><i class="fas fa-wind"></i><span>${wind}</span></div>
                    <div class="f-detail-item"><i class="fas fa-tint"></i><span>${humid}%</span></div>
                </div>
            `;
            forecastGrid.appendChild(card);
        }

        function closeModal() { modal.classList.remove("active"); }
        function showError(msg) { errorDiv.innerText = msg; errorDiv.style.display = "block"; weatherDiv.style.display = "none"; forecastBtns.style.display = "none"; }

        searchBtn.addEventListener("click", () => checkWeather(searchBox.value));
        searchBox.addEventListener("keypress", (e) => { if (e.key === "Enter") checkWeather(searchBox.value); });
    </script>
</body>
</html>